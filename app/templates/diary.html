{% extends 'base.html' %} {% block app_content %}
<div class="container">
    <h2 class='text-center'>Food Diary</h2>
    <hr/>
    <br/>
    <form class="text-center" method="post">
        {{ form.hidden_tag() }}
        <div class="row">
            <div class="form-group col-xs-12 col-sm-4 col-sm-offset-4">
                <div class="col-xs-3">{{ form2.back(class="btn btn-block btn-primary mb-2") }}</div>
                <div class="col-xs-6">{{ form2.date(size=25, readonly=true, class="text-center form-control") }}</div>
                <div class="col-xs-3">{{ form2.forward(class="btn btn-block btn-primary mb-2") }}</div>
            </div>
        </div>
    </form>
    <div class="clearfix"></div>
    <br/>
    <table class="table table-condensed table-bordered">
        <thead>
            <tr>
                <th style="width: 40%">Breakfast |
                    <a href="{{ url_for('search', date=date_pick, meal='Breakfast') }}">Add food.</a>
                </th>
                <th style="width: 10%" class="text-center">Count</th>
                <th style="width: 10%" class="text-center">kcal</th>
                <th style="width: 10%" class="text-center">Protein</th>
                <th style="width: 10%" class="text-center">Fat</th>
                <th style="width: 10%" class="text-center">Carbs</th>
                <th class="text-center">Remove</th>
            </tr>
        </thead>
        {% for food in foods %} {% if food.meal == "Breakfast" %}
        <tr>
            <td>
                <a href="{{ url_for('get_nutrition', ndbno=food.ndbno) }}">{{ food.food_name + ", " + food.unit}}</a>
            </td>
            <td class="text-center">{{ food.count }}</td>
            <td class="text-center">{{ food.kcal }}</td>
            <td class="text-center">{{ food.protein }}</td>
            <td class="text-center">{{ food.fat }}</td>
            <td class="text-center">{{ food.carbs }}</td>
            <td class="text-center">
                <form method='post'>
                    {{ form.entry_id(value=food.id) }} {{ form.hidden_tag() }} {{ form.remove() }}
                </form>
            </td>
        </tr>
        {% endif %} {% endfor %}
        <tr>
            <td></td>
            <td></td>
            <td class="text-center">{{ total_cals['Breakfast'] }}</td>
            <td class="text-center">{{ total_protein['Breakfast'] }}</td>
            <td class="text-center">{{ total_fat['Breakfast'] }}</td>
            <td class="text-center">{{ total_carbs['Breakfast'] }}</td>
        </tr>
    </table>

    <br/>

    <table class="table table-condensed table-bordered">
        <thead>
            <tr>
                <th style="width: 40%">Lunch |
                    <a href="{{ url_for('search', date=date_pick, meal='Lunch') }}">Add food.</a>
                </th>
                <th style="width: 10%" class="text-center">Count</th>
                <th style="width: 10%" class="text-center">kcal</th>
                <th style="width: 10%" class="text-center">Protein</th>
                <th style="width: 10%" class="text-center">Fat</th>
                <th style="width: 10%" class="text-center">Carbs</th>
                <th class="text-center">Remove</th>
            </tr>
        </thead>
        {% for food in foods %} {% if food.meal == "Lunch" %}
        <tr>
            <td>
                <a href="{{ url_for('get_nutrition', ndbno=food.ndbno) }}">{{ food.food_name + ", " + food.unit }}</a>
            </td>
            <td class="text-center">{{ food.count }}</td>
            <td class="text-center">{{ food.kcal }}</td>
            <td class="text-center">{{ food.protein }}</td>
            <td class="text-center">{{ food.fat }}</td>
            <td class="text-center">{{ food.carbs }}</td>
            <td class="text-center">
                <form method='post'>
                    {{ form.entry_id(value=food.id) }} {{ form.hidden_tag() }} {{ form.remove() }}
                </form>
            </td>
        </tr>
        {% endif %} {% endfor %}
        <tr>
            <td></td>
            <td></td>
            <td class="text-center">{{ total_cals['Lunch'] }}</td>
            <td class="text-center">{{ total_protein['Lunch'] }}</td>
            <td class="text-center">{{ total_fat['Lunch'] }}</td>
            <td class="text-center">{{ total_carbs['Lunch'] }}</td>
        </tr>
    </table>

    <br/>

    <table class="table table-condensed table-bordered">
        <thead>
            <tr>
                <th style="width: 40%">Dinner |
                    <a href="{{ url_for('search', date=date_pick, meal='Dinner') }}">Add food.</a>
                </th>
                <th style="width: 10%" class="text-center">Count</th>
                <th style="width: 10%" class="text-center">kcal</th>
                <th style="width: 10%" class="text-center">Protein</th>
                <th style="width: 10%" class="text-center">Fat</th>
                <th style="width: 10%" class="text-center">Carbs</th>
                <th class="text-center">Remove</th>
            </tr>
        </thead>
        {% for food in foods %} {% if food.meal == "Dinner" %}
        <tr>
            <td>
                <a href="{{ url_for('get_nutrition', ndbno=food.ndbno) }}">{{ food.food_name + ", " + food.unit }}</a>
            </td>
            <td class="text-center">{{ food.count }}</td>
            <td class="text-center">{{ food.kcal }}</td>
            <td class="text-center">{{ food.protein }}</td>
            <td class="text-center">{{ food.fat }}</td>
            <td class="text-center">{{ food.carbs }}</td>
            <td class="text-center">
                <form method='post'>
                    {{ form.entry_id(value=food.id) }} {{ form.hidden_tag() }} {{ form.remove() }}
                </form>
            </td>
        </tr>
        {% endif %} {% endfor %}
        <tr>
            <td></td>
            <td></td>
            <td class="text-center">{{ total_cals['Dinner'] }}</td>
            <td class="text-center">{{ total_protein['Dinner'] }}</td>
            <td class="text-center">{{ total_fat['Dinner'] }}</td>
            <td class="text-center">{{ total_carbs['Dinner'] }}</td>
        </tr>
    </table>

    <br/>

    <table class="table table-condensed table-bordered">
        <thead>
            <tr>
                <th style="width: 40%">Snacks |
                    <a href="{{ url_for('search', date=date_pick, meal='Snacks') }}">Add food.</a>
                </th>
                <th style="width: 10%" class="text-center">Count</th>
                <th style="width: 10%" class="text-center">kcal</th>
                <th style="width: 10%" class="text-center">Protein</th>
                <th style="width: 10%" class="text-center">Fat</th>
                <th style="width: 10%" class="text-center">Carbs</th>
                <th class="text-center">Remove</th>
            </tr>
        </thead>
        {% for food in foods %} {% if food.meal == "Snacks" %}
        <tr>
            <td>
                <a href="{{ url_for('get_nutrition', ndbno=food.ndbno) }}">{{ food.food_name + ", " + food.unit }}</a>
            </td>
            <td class="text-center">{{ food.count }}</td>
            <td class="text-center">{{ food.kcal }}</td>
            <td class="text-center">{{ food.protein }}</td>
            <td class="text-center">{{ food.fat }}</td>
            <td class="text-center">{{ food.carbs }}</td>
            <td class="text-center">
                <form method='post'>
                    {{ form.entry_id(value=food.id) }} {{ form.hidden_tag() }} {{ form.remove() }}
                </form>
            </td>
        </tr>
        {% endif %} {% endfor %}
        <tr>
            <td></td>
            <td></td>
            <td class="text-center">{{ total_cals['Snacks'] }}</td>
            <td class="text-center">{{ total_protein['Snacks'] }}</td>
            <td class="text-center">{{ total_fat['Snacks'] }}</td>
            <td class="text-center">{{ total_carbs['Snacks'] }}</td>
        </tr>
    </table>

    <br/>

    <table class="table table-condensed">
        <thead>
            <tr>
                <th style="width: 40%">Totals</th>
                <th style="width: 10%"></th>
                <th style="width: 10%" class="text-center">kcal</th>
                <th style="width: 10%" class="text-center">Protein</th>
                <th style="width: 10%" class="text-center">Fat</th>
                <th style="width: 10%" class="text-center">Carbs</th>
                <th></th>
            </tr>
        </thead>
        <tr>
            <td class="text-right">Start Macros</td>
            <td></td>
            <td class="text-center">{{ user.calories_goal }}</td>
            <td class="text-center">{{ user.protein_grams }}</td>
            <td class="text-center">{{ user.fat_grams }}</td>
            <td class="text-center">{{ user.carbs_grams }}</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td class="text-right">Consumed</td>
            <td></td>
            <td class="text-center">{{ total_cals['total'] }}</td>
            <td class="text-center">{{ total_protein['total'] }}</td>
            <td class="text-center">{{ total_fat['total'] }}</td>
            <td class="text-center">{{ total_carbs['total'] }}</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td class="text-right">Remaining</td>
            <td></td>
            <td class="text-center">{{ user.calories_goal - total_cals['total'] }}</td>
            <td class="text-center">{{ user.protein_grams - total_protein['total'] }}</td>
            <td class="text-center">{{ user.fat_grams - total_fat['total'] }}</td>
            <td class="text-center">{{ user.carbs_grams - total_carbs['total'] }}</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
</div>
{% endblock %}